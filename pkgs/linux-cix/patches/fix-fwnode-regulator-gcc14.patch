From: NixOS build fix
Subject: Fix GCC 14 error in fwnode_regulator.c

fwnode_count_reference_with_args() returns int, not a pointer. Using IS_ERR()
on an int causes a compilation error with GCC 14.

--- a/drivers/regulator/fwnode_regulator.c
+++ b/drivers/regulator/fwnode_regulator.c
@@ -85,7 +85,7 @@ static int fwnode_get_regulation_constraints(struct device *dev,

 	n_phandles = fwnode_count_reference_with_args(np, "regulator-coupled-with",
 						NULL);
-	if (IS_ERR(n_phandles))
+	if (n_phandles < 0)
 		n_phandles = 0;

 	n_phandles = max(n_phandles, 0);
